// Reynard - librewolf.overrides.cfg file
// https://github.com/matey-0/reynard
// License: MIT 
// Versions Tested: 
//    - LibreWolf 146.0.1-1 on Fedora 43 Linux
//    - LibreWolf 146.0.1-1 on macOS 26 Tahoe
//    - LibreWolf 146.0.1-1 on CachyOS Handheld Edition
// Last Updated: January 9, 2026
//
// Designed for the most optimally balanced web experience (usable, minimalist, fast, private, secure)
// For advanced users comfortable with breakage, and have an understanding of browser internals
// Assumes decently high-end tech specs by default (other profiles exist), you will need to modify performance configs for your machine
// When using this in Firefox, replace 'pref' with 'user_pref'

// Purely Personal Preferences
pref("browser.urlbar.scotchBonnet.enableOverride", false); // revert the 'new' firefox url bar to the old one 
pref("browser.compactmode.show", true); // show compact mode in the UI
pref("toolkit.legacyUserProfileCustomizations.stylesheets", true); // enable customizing the browser with userChrome.css & userContent.css
pref("widget.non-native-theme.scrollbar.style", 3); // Sets the scrollbar to android-like slim scrollbar
pref("middlemouse.paste", false);
pref("general.autoScroll", true); // enable middle clicking for autoscroll
pref("mousewheel.with_control.action", 1);
pref("browser.urlbar.suggest.engines", false); // disable enabling of search engine suggestions
pref("browser.tabs.closeWindowWithLastTab", false);
pref("dom.webnotifications.enabled", false); // disable notifications
pref("browser.uidensity", 1); // enable & force compact mode
pref("enable.stupidMozillaShit", false);
pref("browser.aboutConfig.showWarning", false);
pref("intl.accept_languages", "en-CA, en"); // change to US english if you're American 
pref("browser.sessionstore.max_resumed_crashes", 1); // save only one session
pref("browser.sessionstore.resume_from_crash", true); // restore from crashes
pref("xpinstall.signatures.required", true); // set this to false when developing extensions 
// pref("browser.tabs.splitView.enabled", false); // visually broken with compact mode, but kinda useful
// pref("media.videocontrols.picture-in-picture.enable-when-switching-tabs.enabled", false); // experimental feature, useful but annoying 

// Make sure the blank tab pages are empty & clean
pref("browser.startup.page", 1);
pref("browser.startup.homepage", "about:home");
pref("browser.newtabpage.enabled", true);
pref("browser.newtabpage.activity-stream.default.sites", "");
pref("browser.newtabpage.activity-stream.showSearch", false);
pref("browser.newtabpage.activity-stream.feeds.topsites", false);
pref("browser.newtabpage.activity-stream.showSponsored", false);
pref("browser.newtabpage.activity-stream.showSponsoredTopSites", false);
pref("browser.newtabpage.activity-stream.feeds.section.highlights", false);
pref("browser.newtabpage.activity-stream.section.highlights.includeVisited", false);
pref("browser.newtabpage.activity-stream.section.highlights.includeBookmarks", false);
pref("browser.newtabpage.activity-stream.section.highlights.includeDownloads", false);

// Clean up searching a little
pref("browser.urlbar.quicksuggest.enabled", false);
pref("browser.urlbar.suggest.quicksuggest.nonsponsored", false);
pref("browser.urlbar.showSearchTerms.enabled", false); // url instead of search terms on a search page (e.g. kagi or google)
pref("browser.urlbar.maxRichResults", 1); // only show one result when searching in the url bar
pref("browser.urlbar.unitConversion.enabled", false);
pref("browser.urlbar.suggest.recentsearches", false);
pref("browser.urlbar.suggest.history", false);
pref("browser.urlbar.suggest.bookmark", false);
pref("browser.urlbar.suggest.openpage", false);
pref("browser.urlbar.suggest.trending", false);
pref("browser.urlbar.suggest.engines", false);
pref("browser.urlbar.suggest.quickactions", false);
pref("browser.urlbar.shortcuts.bookmarks", false);
pref("browser.urlbar.shortcuts.tabs", false);
pref("browser.urlbar.shortcuts.history", false);
pref("browser.urlbar.shortcuts.actions", false);

// Fingerprinting protections (will cause breakage)
pref("privacy.resistFingerprinting", true); // set to true for more privacy, breaks stuff. Note on resist fingerprinting: 99% of issues caused by resist fingerprinting is due to canvas blocking; you can fix this by pressing control + I, and then manually fixing each site you need to. 
pref("privacy.resistFingerprinting.pbmode", true); // enable resistFingerprinting in private windows
pref("privacy.resistFingerprinting.randomization.daily_reset.enabled", true); // daily reset of fingerprint
pref("privacy.resistFingerprinting.randomization.daily_reset.private.enabled", true); // daily reset in PB windows
pref("privacy.resistFingerprinting.randomization.canvas.use_siphash", true); // use siphash for canvas randomization
pref("privacy.fingerprintingProtection", true); // there is never any reason to disable this
pref("privacy.fingerprintingProtection.overrides", "+AllTargets, -CSSPrefersColorScheme,-FrameRate,-JSDateTimeUTC,-RoundWindowSize"); // Increases baseline privacy of privacy.fingerprintingProtection
pref("privacy.resistFingerprinting.exemptedDomains", "gemini.google.com, discord.com, docs.google.com, slides.google.com, accounts.google.com, *.kagi.com, news.ycombinator.com, youtube.com, github.com, duckduckgo.com, en.wikipedia.org, *.wikipedia.org, *.google.com"); // various sites known, by me, to be borked with resist fingerprinting (also don't really track you like that, you're logging in directly anyways)
pref("javascript.use_us_english_locale", true); // prevent you from using non-english, good for fingerprinting protection

// General privacy/security increasing prefs (may cause breakage)
pref("geo.enabled", false); // disable geolocation support
pref("geo.provider.network.url", ""); // disables geolocation services
pref("dom.popup_allowed_events", "click dblclick mousedown pointerdown"); // reduce things that can trigger popups
pref("permissions.manager.defaultsUrl", ""); // remove special Mozilla domain permissions
pref("network.IDN_show_punycode", true); // helps with homograph attacks, and spoofing
pref("cookiebanners.service.mode", 1); // tries to reject cookie notices, may break some things, but unlikely
pref("browser.cache.disk.enable", false); // will use more RAM, and sites may load slower initially
pref("beacon.enabled", false); // disable web beacons, primarily used for tracking and telemetry
pref("dom.battery.enabled", false); // don't share with websites your battery status
pref("privacy.trackingprotection.allow_list.convenience.enabled", true); // no exceptions for trusted sites
pref("privacy.trackingprotection.enabled", true); // enforce better tracking protection
pref("privacy.trackingprotection.socialtracking.enabled", true); // prevents social media tracking 
pref("dom.webgpu.enabled", false); // massive fingerprinting vector, not really used quite yet, maybe in the future
pref("dom.webgpu.service-workers.enabled", false); // enable/disable this with the main webgpu pref
pref("privacy.query_stripping.strip_list", "__hsfp __hssc __hstc __s _hsenc _openstat dclid fbclid gbraid gclid hsCtaTracking igshid mc_eid ml_subscriber ml_subscriber_hash msclkid oft_c oft_ck oft_d oft_id oft_ids oft_k oft_lk oft_sk oly_anon_id oly_enc_id rb_clickid s_cid twclid vero_conv vero_id wbraid wickedid yclid ceneo_spo cmpid crid dclid Echobox fbclid feature gclid gs_l hsCtaTracking kw mkt_tok ml_subscriber ml_subscriber_hash msclkid oly_anon_id oly_enc_id os_ehash pp rb_clickid si spm srsltid s_cid tracking_source twclid vero_conv vero_id wickedid wtrid yclid _ga _gl _hsenc _openstat __hsfp __hssc __hstc __s __twitter_impression fbclid gclid ICID igshid link_id mcID rb_clickid ref track_click utm_source ia ffab"); // pref to strip trackers from URLs, might break some websites. Concatenated to LibreWolf's remote list, so is always up-to-date (or at least should be)

// Try to prevent some cross-site tracking (may cause breakage)
pref("network.cookie.cookieBehavior", 5); // set this to 1 for even more privacy, and breakage
pref("privacy.partition.network_state", true) 
pref("network.cookie.sameSite.schemeful", true);
pref("network.http.referer.XOriginTrimmingPolicy", 2);
pref("privacy.antitracking.isolateContentScriptResources", true);
pref("privacy.partition.serviceWorkers.enabled", true);
pref("dom.security.https_only_mode_send_http_background_request", false);
pref("network.http.referer.XOriginPolicy", 2); // 0 always sends a referrer when requested. 1 sends referrers if the base host matches (e.g. news.kagi.com & kagi.com), and 2 sends referrers only for same-host requests (news.kagi.com --> kagi.com is blocked. Only kagi.com --> kagi.com is allowed). 2 is the most restrictive, and 0 is the default preference.

// Various network related prefs to increase privacy and security
pref("network.dns.blockDotOnion", true); // NEVER USE NON-TOR BROWSER FOR TOR STUFF!
pref("network.ftp.enabled", false); // disable FTP, insecure and not widely used
pref("network.prefetch-next", false); // disable prefetch
pref("network.http.referer.spoofSource", true);
pref("network.http.speculative-parallel-limit", 0); // prevent prefetching
pref("network.proxy.failover_direct", false);
pref("network.cookie.cookieBehavior.trackerCookieBlocking", true); // auto deny cookie notices
pref("media.peerconnection.ice.proxy_only_if_behind_proxy", true); // help with WebRTC IP leakage
pref("dom.security.https_only_mode", true); // should be default already, but just enforce encase it isn't set 
pref("browser.xul.error_pages.expert_bad_cert", true);
pref("dom.security.https_only_mode_ever_enabled", true);

// Privacy/security reducing prefs (for site compatibility)
pref("browser.formfill.enable", true); // allow form filling
pref("webgl.disabled", false); // set to true if you care about fingerprinting, can toggle on a per site basis with something like NoScript

// Disable all browser AI stuff
pref("browser.ml.chat.menu", false);
pref("browser.ml.enable", false);
pref("browser.ml.chat.enabled", false);
pref("browser.ml.chat.sidebar", false);
pref("browser.ml.chat.page", false);
pref("browser.ml.chat.page.footerBadge", false);
pref("browser.ml.chat.page.menuBadge", false);
pref("browser.ml.checkForMemory", false);
pref("browser.ml.linkPreview.enabled", false);
pref("browser.ml.modelHubRootUrl", "");
pref("browser.ml.linkPreview.shift", false);
pref("browser.ml.chat.shortcuts.custom", false);
pref("browser.ml.chat.shortcuts", false);

// Linux, Wayland, & GTK specific prefs (Should be distro agnostic, works on Fedora & SteamOS)
// In my testing, these prefs either apply to macOS, or do nothing, so leaving them should be harmless
// I've had issues with webrender in the past before however on macOS. If your mac is using CPU over GPU, try playing with webrender settings
pref("gfx.webrender.compositor", true);
pref("gfx.webrender.quality.force-subpixel-aa-where-possible", true); // might decrease performance, increases quality of text rendering slightly
pref("gfx.webrender.all", true); 
pref("layers.gpu-process.enabled", true);
pref("widget.gtk.native-context-menus", false); // disables GTK context menu, currently broken
pref("widget.gtk.hide-pointer-while-typing.enabled", false);
pref("middlemouse.contentLoadURL", false); // disable middlemouse paste 
pref("browser.tabs.searchclipboardfor.middleclick", false);
pref("geo.provider.use_geoclue", false); // disable geolocation provider on Linux
pref("dom.push.enabled", false); // disable notification
pref("media.ffmpeg.vaapi.enabled", true);
pref("widget.gtk.non-native-titlebar-buttons.enabled", true); // adds GTK/Qt menu bar items
pref("widget.use-xdg-desktop-portal.file-picker", 1);
pref("widget.use-xdg-desktop-portal.mime-handler", 1);
pref("apz.gtk.pangesture.enabled", true);
pref("apz.gtk.touchpad.swipe.enabled", true);

// NOTE: DO NOT uncomment or change these settings, It will mess everything up, and you will spend hours troubleshooting & wondering why librewolf keeps changing your search engine to duckduckgo, when you've set it to kagi manually using both the GUI *and* the pref, causing you so much annoyance and grief that you consider switching browsers entirely, because surely brave doesn't have these issues, right? Long story short, just don't edit these preferences, they don't do anything anyways.
// pref("browser.policies.runOncePerModification.setDefaultSearchEngine", "kagi-rules");
// pref("browser.search.defaultenginename", "google-sucks");

// Prefs for general speed, should apply to most/all devices
pref("browser.preferences.defaultPerformanceSettings.enabled", false); // disable default settings to apply my settings
pref("content.notify.interval", 130000);
pref("network.buffer.cache.count", 64);
pref("network.buffer.cache.size", 65535);
pref("nglayout.initialpaint.delay", 0);
pref("content.notify.backoffcount", 5);
pref("network.http.max-connections", 1200); // increase max connections, lower than betterfox to avoid rate limiting 
pref("browser.tabs.remote.separatePrivilegedMozillaWebContentProcess", true);
pref("javascript.options.mem.gc_incremental", true); // should be default, enforce
pref("javascript.options.mem.gc_compacting", true); // should be default, enforce
pref("browser.cache.memory.capacity", -1); // let LibreWolf manage RAM automatically
pref("media.memory_cache_max_size", -1); // let LibreWolf manage VRAM automatically
pref("media.memory_caches_combined_limit_kb", -1); // let LibreWolf manage VRAM automatically

// My Personal Framework 13 Overrides
// Performance overrides (128gb RAM [16gb VRAM, 112gb RAM], 12c/24t CPU) 
pref("dom.ipc.processCount", 14);
pref("dom.ipc.processCount.webIsolated", 14);
pref("dom.ipc.processCount.privilegedabout", 2);
pref("dom.ipc.processPrelaunch.delayMs", 500);
pref("javascript.options.mem.gc_allocation_threshold_mb", 35);
pref("image.mem.decode_bytes_at_a_time", 131072);
pref("image.mem.max_decoded_image_kb", 4194304);
pref("browser.cache.memory.max_entry_size", 204800);
pref("media.memory_caches_combined_limit_pc_sysmem", 15);
pref("browser.low_commit_space_threshold_percent", 7);
pref("browser.sessionhistory.max_total_viewers", -1); 
pref("browser.tabs.min_inactive_duration_before_unload", 900000);
// Form factor specific overrides
pref("layout.frame_rate", 120);
pref("browser.tabs.tabMinWidth", 110);
pref("mousewheel.default.delta_multiplier_y", 90);
pref("mousewheel.default.delta_multiplier_z", 90);
pref("mousewheel.default.delta_multiplier_x", 90);

// Smoothfox stuff (Reference Betterfox docs for each pref)
pref("apz.overscroll.enabled", true);
pref("general.smoothScroll", true);
pref("general.smoothScroll.msdPhysics.continuousMotionMaxDeltaMS", 12);
pref("general.smoothScroll.msdPhysics.enabled", true);
pref("general.smoothScroll.msdPhysics.motionBeginSpringConstant", 600);
pref("general.smoothScroll.msdPhysics.regularSpringConstant", 650);
pref("general.smoothScroll.msdPhysics.slowdownMinDeltaMS", 25);
pref("general.smoothScroll.msdPhysics.slowdownMinDeltaRatio", "2");
pref("general.smoothScroll.msdPhysics.slowdownSpringConstant", 250);
pref("general.smoothScroll.currentVelocityWeighting", "1");
pref("general.smoothScroll.stopDecelerationWeighting", "1");

// Peskyfox stuff (Reference Betterfox docs for each pref)
pref("browser.privatebrowsing.vpnpromourl", "");
pref("extensions.getAddons.showPane", false);
pref("extensions.htmlaboutaddons.recommendations.enabled", false);
pref("browser.discovery.enabled", false);
pref("browser.shell.checkDefaultBrowser", false);
pref("browser.newtabpage.activity-stream.asrouter.userprefs.cfr.addons", false);
pref("browser.newtabpage.activity-stream.asrouter.userprefs.cfr.features", false);
pref("browser.preferences.moreFromMozilla", false);
pref("browser.aboutwelcome.enabled", false);
pref("layout.css.prefers-color-scheme.content-override", 0);
pref("cookiebanners.service.enableGlobalRules", true);
pref("cookiebanners.service.enableGlobalRules.subFrames", true);
pref("browser.translations.autoTranslate", true);
pref("browser.translations.enable", true);
pref("full-screen-api.transition-duration.enter", "0 0");
pref("full-screen-api.transition-duration.leave", "0 0");
pref("full-screen-api.warning.timeout", 0);
pref("full-screen-api.warning.delay", -1);
pref("dom.text_fragments.create_text_fragment.enabled", true);
pref("media.autoplay.default", 1);
pref("media.block-autoplay-until-in-foreground", true);
pref("browser.newtabpage.activity-stream.showSponsoredTopSites", false);
pref("browser.newtabpage.activity-stream.feeds.section.topstories", false);
pref("browser.newtabpage.activity-stream.showSponsored", false);
pref("browser.newtabpage.activity-stream.default.sites", "");
pref("browser.newtabpage.activity-stream.logowordmark.alwaysVisible", false);
pref("browser.toolbars.bookmarks.visibility", "never");
pref("extensions.pocket.enabled", false);
pref("browser.download.folderList", 1);
pref("browser.download.always_ask_before_handling_new_types", false);
pref("browser.download.useDownloadDir", false);
pref("browser.download.autohideButton", true);
pref("browser.download.manager.addToRecentDocs", false);
pref("browser.menu.showViewImageInfo", true);
pref("layout.word_select.eat_space_to_next_word", false);
pref("browser.tabs.hoverPreview.enabled", true);
pref("permissions.default.shortcuts", 0);
pref("layout.spellcheckDefault", 2);

// Fastfox stuff (Reference Betterfox docs for each pref)
pref("gfx.webrender.precache-shaders", true);
pref("gfx.canvas.accelerated.cache-size", 512);
pref("gfx.content.skia-font-cache-size", 20);
pref("media.cache_resume_threshold", 3600);
pref("media.cache_readahead_limit", 7200);
pref("network.http.max-persistent-connections-per-server", 10);
pref("network.http.max-urgent-start-excessive-connections-per-host", 5);
pref("network.http.max-persistent-connections-per-proxy", 48);
pref("network.http.pacing.requests.enabled", false);
pref("network.ssl_tokens_cache_capacity", 10240);
pref("network.dns.disablePrefetch", true);
pref("network.dns.disablePrefetchFromHTTPS", true);
pref("browser.places.speculativeConnect.enabled", false);
pref("network.predictor.enabled", false);
pref("browser.tabs.unloadOnLowMemory", true);
pref("fission.webContentIsolationStrategy", 1);
pref("network.dnsCacheExpiration", 3600);

// Securefox stuff (Reference Betterfox docs for each pref)
pref("privacy.query_stripping.strip_on_share.enabled", true);

